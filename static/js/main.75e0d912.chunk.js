(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{196:function(e,t,n){e.exports=n.p+"static/media/Satarklogo.e8a923ed.png"},244:function(e,t,n){e.exports=n(500)},253:function(e,t,n){},500:function(e,t,n){"use strict";n.r(t);var a=n(5),r=n(1),c=n.n(r),o=n(64),i=n.n(o),l=n(506),u=n(508),s=n(509),d=n(37),m=n(49),f=n(214),h=n(194),p=n(6),v=(n(253),n(26)),b=n(27),g=n(29),E=n(28),y=n(18),O=n(195),j=n(199),x=n(196),w=n.n(x);function k(){var e=Object(a.a)(["\n  border: none;\n  font-size: large;\n  background: transparent;\n"]);return k=function(){return e},e}function C(){var e=Object(a.a)(["\n  position: fixed;\n  background-color: white;\n  padding: 0.5rem;\n  right: 0;\n  left: 0;\n  text-align: right;\n\n  bottom: 4rem;\n  border-top: 1px dotted black;\n\n  @media screen and (min-width: 426px) {\n    bottom: 6.5rem;\n    padding: 1rem;\n  }\n\n  @media screen and (min-width: 769px) {\n    right: 10%;\n    left: 10%;\n  }\n"]);return C=function(){return e},e}function S(){var e=Object(a.a)(["\n  position: fixed;\n  background: white;\n  min-height: 10rem;\n  overflow: auto;\n  top: 7.5rem;\n  left: 0;\n  right: 0;\n  bottom: ",";\n  \n  @media screen and (min-width: 426px) {\n    top: 10rem;\n    bottom: ","\n  }\n\n  @media screen and (min-width: 769px) {\n    right: 10%;\n    left: 10%;\n  }\n"]);return S=function(){return e},e}function R(){var e=Object(a.a)(["\n  display: inline-block;\n  width: 2rem;\n  font-size: large;\n  font-weight: bold;    \n  border: 0;\n  background-color: black;\n  color: white;\n"]);return R=function(){return e},e}function A(){var e=Object(a.a)(["\n  display: inline-block;\n  width: calc(100% - 2rem);\n"]);return A=function(){return e},e}function D(){var e=Object(a.a)(["\n  position: fixed;\n  right: 0;\n  left: 0;\n  top: 4.5rem;\n  height: 3rem;\n  background-color: black;\n  color: white;\n  vertical-align: middle;\n  line-height: 3rem;\n  text-align: center;\n\n  @media screen and (min-width: 426px) {\n    top: 7rem;\n  }\n\n  @media screen and (min-width: 769px) {\n    right: 10%;\n    left: 10%;\n  }\n\n  .close {\n  }\n"]);return D=function(){return e},e}function P(){var e=Object(a.a)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.6);\n  z-index: 1;\n  display: ",";\n"]);return P=function(){return e},e}var _=p.a.div(P(),function(e){return e.show?"block":"none"}),I=p.a.div(D()),L=p.a.div(A()),N=p.a.button(R()),T=p.a.div(S(),function(e){return e.fixed?"6.5rem":"initial"},function(e){return e.fixed?"10em":"initial"}),M=p.a.div(C()),U=p.a.button(k()),H=function(e){var t=e.title,n=e.show,a=e.onClose,r=e.fixedBottom,o=void 0!==r&&r,i=e.children;return c.a.createElement(_,{show:n},t&&c.a.createElement(I,null,c.a.createElement(L,null,t),a&&!o&&c.a.createElement(N,{type:"button",onClick:a},"X")),c.a.createElement(T,{fixed:o},i),a&&o&&c.a.createElement(M,null,a&&c.a.createElement(U,{type:"button",onClick:a},"Close")))};H.defaultProps={title:null,onClose:null,fixedBottom:!1};var Y=H;function $(){var e=Object(a.a)(["\n  display: table-cell;\n"]);return $=function(){return e},e}function q(){var e=Object(a.a)(["\n  display: table-cell;\n  font-weight: 600;\n  width: 4rem;\n"]);return q=function(){return e},e}function z(){var e=Object(a.a)(["\n  display: table-row;\n"]);return z=function(){return e},e}function G(){var e=Object(a.a)(["\n  margin: 0.5rem auto;\n  display: table;\n\n  box-shadow: 1.5px 2px 1px 1px;\n  border-radius: 0.5rem;\n  width: -webkit-fill-available;\n  padding: 0.5rem;\n"]);return G=function(){return e},e}var K=p.a.div(G()),F=p.a.div(z()),B=p.a.div(q()),W=p.a.div($()),V=function(e){var t=e.children;return c.a.createElement(B,null,t)};V.defaultProps={children:null};var Q=function(e){var t=e.children;return c.a.createElement(W,null,t)},J=function(e){var t=e.children;return c.a.createElement(F,null,t)},X=function(e){var t=e.children;return c.a.createElement(K,null,t)},Z=n(198);function ee(){var e=Object(a.a)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.6);\n  z-index: 1;\n  display: ","\n\n  & > div {\n    position: absolute;\n    top: 47.5%;\n    left: 47.5%;\n  }\n"]);return ee=function(){return e},e}var te=p.a.div(ee(),function(e){return e.loading?"block":"none"}),ne=function(e){var t=e.loading;return c.a.createElement(te,{loading:t},c.a.createElement(Z.PulseLoader,{color:"#fff",loading:t}))};function ae(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,a=Object(y.a)(e);if(t){var r=Object(y.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(E.a)(this,n)}}function re(){var e=Object(a.a)(["\n  margin: 1rem;\n  padding: 1rem 0.5rem;\n"]);return re=function(){return e},e}var ce=p.a.div(re()),oe=function(e){Object(g.a)(n,e);var t=ae(n);function n(){var e;return Object(v.a)(this,n),(e=t.call(this)).toggleModal=function(){var t=e.state.show;e.setState({show:!t})},e.state={show:!1},e}return Object(b.a)(n,[{key:"componentDidUpdate",value:function(e){var t=this.props.message;e.message!==t&&this.toggleModal()}},{key:"render",value:function(){var e=this.props.message,t=this.state.show;return c.a.createElement(Y,{title:"Something goes wrong",show:t,onClose:this.toggleModal},c.a.createElement(ce,null,e))}}]),n}(c.a.PureComponent),ie=n(38);function le(){var e=Object(a.a)(["\n  border: 1px solid;\n  border-radius: 0.5rem;\n  height: 1.5rem;\n  min-width: 5rem;\n  background-color: ;\n  font-family: inherit;\n"]);return le=function(){return e},e}var ue=p.a.select(le()),se=function(e){var t=e.id,n=e.name,a=e.value,r=e.options,o=e.onChange,i=e.className,l=Object(ie.a)(e,["id","name","value","options","onChange","className"]);return c.a.createElement(ue,Object.assign({id:t,name:n,onChange:o,value:a,className:i},l),r&&r.map(function(e){var t=e.value,n=e.text,a=void 0===n?t:n;return c.a.createElement("option",{key:t,value:t},a)}))};se.defaultProps={id:"",name:"",className:""};var de=se;function me(){var e=Object(a.a)(["\n  background-color: black;\n  color: white;\n  font-weight: bolder;\n  padding: 0.9rem 7rem;\n  border: 0;\n  border-radius: 0.5rem;\n  min-height: 1.5rem;\n  font-family: inherit;\n"]);return me=function(){return e},e}var fe=p.a.button(me()),he=function(e){var t=e.onClick,n=e.className,a=e.children,r=Object(ie.a)(e,["onClick","className","children"]);return c.a.createElement(fe,Object.assign({onClick:t,className:n||null},r),a)};he.defaultProps={onClick:function(){},className:""};var pe=he;function ve(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,a=Object(y.a)(e);if(t){var r=Object(y.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(E.a)(this,n)}}function be(){var e=Object(a.a)(["\n  display: ",";\n  width: 100%;\n  box-sizing: border-box;\n  border: 1px solid #ccc;\n  border-top: none;\n\n  position: absolute;\n  top: 3rem;\n  bottom: 0;\n  overflow: auto;\n\n  animation: fadeEffect 1s;\n  @keyframes fadeEffect {\n    from {\n      opacity: 0;\n    }\n    to {\n      opacity: 1;\n    }\n  }\n"]);return be=function(){return e},e}function ge(){var e=Object(a.a)(["\n  background-color: ",";\n  border: none;\n  outline: none;\n  cursor: pointer;\n  padding: 14px 16px;\n  transition: 0.3s;\n  font-size: medium;\n\n  &:hover {\n    background-color: #ddd;\n  }\n"]);return ge=function(){return e},e}function Ee(){var e=Object(a.a)(["\n  overflow: hidden;\n  background-color: #f1f1f1;\n  border: 1px solid #ccc;\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n"]);return Ee=function(){return e},e}function ye(){var e=Object(a.a)(["\n  position: relative;\n  height: 100%;\n"]);return ye=function(){return e},e}var Oe=p.a.div(ye()),je=p.a.div(Ee()),xe=p.a.button(ge(),function(e){return e.active?"#ccc":"inherit"}),we=p.a.div(be(),function(e){return e.active?"block":"none"}),ke=function(e){var t=e.data,n=e.activeKey,a=e.onSelect;return c.a.createElement(je,null,t&&t.map(function(e,t){return c.a.createElement(xe,{key:e,active:n===t,onClick:a&&a(t)},e)}))};ke.defaultProps={activeKey:-1,onSelect:function(){}};var Ce=function(e){var t=e.activeKey,n=e.titles,a=e.children;return a&&a.map(function(e,a){return c.a.createElement(we,{key:n&&n[a],id:a,active:t===a},e)})};Ce.defaultProps={activeKey:-1,titles:[]};var Se=function(e){Object(g.a)(n,e);var t=ve(n);function n(){var e;return Object(v.a)(this,n),(e=t.call(this)).titles=[],e.select=function(t){return function(){e.setState({id:t})}},e.renderChildren=function(){try{var t=e.props,n=t.onSelect,a=void 0===n?e.select:n,r=t.children,o=e.state.id;return c.a.Children.map(r,function(t){if(t){if(t.type===Ce)return c.a.cloneElement(t,{activeKey:o,titles:e.titles});if(t.type===ke)return e.titles=t.props.data,c.a.cloneElement(t,{activeKey:o,onSelect:a})}return c.a.createElement("div",null)})}catch(i){return console.error(i),c.a.createElement("div",null)}},e.state={id:0},e}return Object(b.a)(n,[{key:"render",value:function(){return c.a.createElement(Oe,null,this.renderChildren())}}]),n}(c.a.Component);Se.Title=ke,Se.Body=Ce;var Re=Se;function Ae(){var e=Object(a.a)(["\n    border: 1px solid grey;\n    border-radius: 0.5rem;\n    padding: 0.5rem;\n"]);return Ae=function(){return e},e}var De=p.a.div(Ae()),Pe=function(e){var t=e.children;return c.a.createElement(De,null,t)};Pe.defaultProps={children:null};var _e=Pe,Ie=n(39),Le=Object(Ie.a)([],function(){return window.screen.width<768});function Ne(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,a=Object(y.a)(e);if(t){var r=Object(y.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(E.a)(this,n)}}function Te(){var e=Object(a.a)(["\n  color: ",";\n  padding: 0.5rem;\n\n  a {\n    color: inherit;\n    text-decoration: none;\n  }\n"]);return Te=function(){return e},e}function Me(){var e=Object(a.a)(["\n  text-align: left;\n  padding: 0 0.5rem;\n\n  display: ",";\n  flex-direction: column;\n  \n  font-size: x-small;\n  line-height: 1rem;\n\n  @media screen and (min-width: 768px) {\n    font-size: small;\n    line-height: 1.5rem;\n  }\n"]);return Me=function(){return e},e}function Ue(){var e=Object(a.a)(["\n  display: inline;\n\n  &:focus {\n    outline: 0;\n  }\n"]);return Ue=function(){return e},e}function He(){var e=Object(a.a)(["\n  text-align: center;\n  font-size: larger;\n  font-weight: bolder;\n"]);return He=function(){return e},e}function Ye(){var e=Object(a.a)(["\n    order: 0;\n    background: black;\n    color: white;\n    line-height: 2rem;\n    vertical-align: middle;\n    padding: 20px;\n    margin: 0;\n    text-align: center;\n    position: relative;\n\n    svg {\n      margin: auto 0.9rem;\n    }\n"]);return Ye=function(){return e},e}var $e=p.a.header(Ye()),qe=p.a.div(He()),ze=p.a.div(Ue()),Ge=p.a.div(Me(),function(e){return e.show?"flex":"none"}),Ke=p.a.div(Te(),function(e){return e.color?e.color:"inherit"}),Fe=function(e){Object(g.a)(n,e);var t=Ne(n);function n(){var e;return Object(v.a)(this,n),(e=t.call(this)).toggle=function(){var t=e.state.toggle;e.setState({toggle:!t})},e.renderInfo=function(e){return c.a.createElement(Ke,{color:e},c.a.createElement("div",null,c.a.createElement("span",null,"Hey ",c.a.createElement("span",null,"\ud83d\ude4b\u200d\u2642\ufe0f")," This website shows the criminal information on the map. "),c.a.createElement("span",null,"We have only UK data so, The data is retreived from "),c.a.createElement("a",{href:"https://data.police.uk",target:"_blank",rel:"noopener noreferrer"},"https://data.police.uk")),c.a.createElement("div",null,c.a.createElement("span",null,"If you have any query, please email me, "),c.a.createElement("a",{href:"mailto:abhi953434@gmail.com"}," ",c.a.createElement("span",null,"\ud83d\udc8c"),"abhi953434@gmail.com")))},e.state={toggle:!1},e}return Object(b.a)(n,[{key:"render",value:function(){var e=this.state.toggle,t=this.props.isMobile;return c.a.createElement($e,null,c.a.createElement(qe,null,c.a.createElement("img",{src:w.a,style:{width:"70px",height:"70px",size:"sm"}})," ",c.a.createElement("div",null,c.a.createElement("span",null," SATARK ")," - \u26a1 TRACK CRIME AROUND YOU \u26a1",c.a.createElement(ze,{onClick:this.toggle,role:"button",tabIndex:0,onKeyPress:this.toggle},c.a.createElement(O.a,{icon:j.a,size:"sm"})))),t&&c.a.createElement(Y,{title:"Information",show:e,onClose:this.toggle},this.renderInfo("black")),!t&&c.a.createElement(Ge,{show:e},this.renderInfo()))}}]),n}(c.a.PureComponent),Be=Object(d.b)(function(){return{isMobile:Le()}})(Fe),We=n(17),Ve=n(200),Qe=n(51),Je={url:"all-crime",name:"All crime"},Xe={"all-crime":"","anti-social-behaviour":"#73b638","bicycle-theft":"#a45dcf",burglary:"#5fbc6e","criminal-damage-arson":"#c0489a",drugs:"#4b7d3c","other-theft":"#666dc6","possession-of-weapons":"#d99938","public-order":"#5e99d2",robbery:"#cc4f32",shoplifting:"#49b9a9","theft-from-the-person":"#c7496a","vehicle-crime":"#adac4d","violent-crime":"#c581bb","other-crime":"#8b6c2f"},Ze="containers/SearchPage/actions/LOAD_AVAILABILITY_SUCCESS",et="containers/SearchPage/actions/LOAD_AVAILABILITY_FAILURE",tt="containers/SearchPage/actions/LOAD_CRIME_CATEGORY_REQUEST",nt="containers/SearchPage/actions/LOAD_CRIME_CATEGORY_SUCCESS",at="containers/SearchPage/actions/LOAD_CRIME_CATEGORY_FAILURE",rt="containers/SearchPage/actions/SEARCH_REQUEST",ct="containers/SearchPage/actions/SEARCH_SUCCESS",ot="containers/SearchPage/actions/SEARCH_FAILURE",it="containers/SearchPage/actions/UPDATE_CHECKED_CATEGORIES",lt="containers/SearchPage/actions/UPDATE_ADDRESS";function ut(e){var t=e.reduce(function(e,t){return{min:e.min&&e.min<t.date?e.min:t.date,max:e.max&&e.max>t.date?e.max:t.date,dates:e.dates?[].concat(Object(Qe.a)(e.dates),[{value:t.date}]):[{value:t.date}]}},{min:"",max:"",dates:[]});return{type:Ze,data:{availability:e,date:t}}}function st(e){var t=e.map(function(e){return Object(We.a)({},e,{checked:!0})});return{type:nt,data:t}}function dt(e){return{type:ct,data:e}}function mt(e){return{type:ot,message:e}}function ft(e,t,n){return{type:lt,data:{postcode:e,street:t,detail:n}}}var ht=n(34),pt="containers/MapPage/actions/SAVE_LOCATION",vt="containers/MapPage/actions/INITIAL_CRIME_CIRCLES",bt="containers/MapPage/actions/FILTER_CRIME_CIRCLES",gt=function(e){return.25*e+.75},Et=function(e){return 225*e+25};function yt(e){return{type:pt,data:e}}function Ot(e){var t=e.reduce(function(e,t){var n=t.category,a=t.location,r=(a=void 0===a?{}:a).latitude,c=a.longitude,o=a.street,i=void 0===o?{}:o;return e[i.id]?Object(We.a)({},e,Object(ht.a)({},i.id,Object(We.a)({},e[i.id],{count:e[i.id].count+1}))):Object(We.a)({},e,Object(ht.a)({},i.id,{category:n,fillColor:Xe[n],street:i,count:1,latlng:[parseFloat(r),parseFloat(c)]}))},{}),n=Object.values(t),a=Math.max.apply(Math,Object(Qe.a)(n.map(function(e){return e.count}))),r=n.map(function(e){return Object(We.a)({},e,{opacity:gt(e.count/a),radius:Et(e.count/a)})});return{type:vt,data:r}}var jt=function(e){return e.search},xt=Object(Ie.a)([jt],function(e){return e.category}),wt=Object(Ie.a)([jt],function(e){e.loading,e.message;return Object(ie.a)(e,["loading","message"])}),kt=Object(Ie.a)([jt],function(e){return{loading:e.loading,message:e.message}}),Ct=n(44);function St(){var e=Object(a.a)(["\n  padding: 0.5rem;\n  display: inline-block;\n  min-width: 4.5rem;\n\n  & > label {\n    font-size: smaller;\n    text-transform: capitalize;\n    font-weight: bold;\n  }\n\n  &.select {\n    padding: 0.25rem 0.5rem;\n\n    @media screen and (min-width: 425px) {\n      min-width: 15rem;\n    }\n  }\n\n  &.crimes, &.buttons {\n    width: calc(100% - 1rem);\n  }\n\n  &.crimes {\n    height: 5.5rem;\n    overflow: auto;\n    display: inline-flex;\n    flex-wrap: wrap;\n    align-items: center; \n\n    @media screen and (min-width: 768px) {\n      height: initial;\n    }\n\n    .each-crime {\n      font-size: small;\n      line-height: 1rem;\n      vertical-align: middle;\n      margin: 0.1rem;\n\n      label {\n        font-size: larger;\n        font-weight: bolder;\n      }\n\n      .color {\n        @media screen and (min-width: 768px) {\n          width: 0.5rem;\n          height: 0.5rem;\n          margin: 0 0.2rem;  \n        }\n\n        width: 0.75rem;\n        height: 0.75rem;\n        display: inline-block;\n        border-radius: 0.5rem;\n        margin: 0 0.3rem;\n      }\n\n      button {\n        &:focus {\n          outline: none;\n        }\n      }\n    }\n  }\n\n  &.buttons {\n    button {\n      width: 100%;\n    }\n  }\n"]);return St=function(){return e},e}var Rt=p.a.div(St()),At=function(e){var t=e.id,n=e.className,a=e.children;return c.a.createElement(Rt,{id:t,className:n},a)};At.defaultProps={id:null,className:""};var Dt=At;function Pt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,a=Object(y.a)(e);if(t){var r=Object(y.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(E.a)(this,n)}}function _t(){var e=Object(a.a)(["\n  height: 1.5rem;\n  border-radius: 0.4rem;\n  border: ",";\n  font-weight: bolder;\n  background-color: ",";\n  opacity: ",";\n"]);return _t=function(){return e},e}var It=p.a.button(_t(),function(e){return e.backgroundColor?"0px":"1px solid black"},function(e){return e.backgroundColor},function(e){return e.checked?1:.5}),Lt=function(e){Object(g.a)(n,e);var t=Pt(n);function n(){var e;return Object(v.a)(this,n),(e=t.call(this)).change=function(t){return function(n){var a=(n||{}).target,r=(a=void 0===a?{}:a).value,c=void 0===r?{}:r;e.setState(Object(ht.a)({},t,c))}},e.checked=function(t,n){return function(a){a.preventDefault();var r=e.props,c=r.categories,o=r.onCheckCategory,i=c.filter(function(e){return e.url===t})||[],l=Object(Ct.a)(i,1)[0];o(Object(We.a)({},l,{checked:n}))}},e.search=function(){(0,e.props.onSearch)(e.state)},e.state={minDate:"",maxDate:"",postcode:"",selCategories:[]},e}return Object(b.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.dates,a=t.categories,r=t.address,o=(r=void 0===r?{}:r).postcode,i=r.street,l=r.detail,u=this.state,s=u.postcode,d=u.minDate,m=u.maxDate;return c.a.createElement("div",null,c.a.createElement(Dt,null,"date"),c.a.createElement(Dt,{className:"select",id:"select_date"},c.a.createElement(de,{id:"select_minDate",name:"minDate",options:n,value:d,onChange:this.change("minDate")}),c.a.createElement("span",null," ~ "),c.a.createElement(de,{id:"select_maxDate",name:"maxDate",options:n,value:m,onChange:this.change("maxDate")})),c.a.createElement(Dt,null,"postcode"),c.a.createElement(Dt,{className:"select"},c.a.createElement("input",{onChange:this.change("postcode"),value:s||o})),c.a.createElement(Dt,null,c.a.createElement(_e,null,c.a.createElement("div",null,i),c.a.createElement("div",null,l))),c.a.createElement(Dt,{className:"crimes"},a&&a.map(function(t){var n=t.url,a=t.name,r=t.checked;return c.a.createElement("div",{className:"each-crime",key:n},c.a.createElement(It,{backgroundColor:Xe[n],onClick:e.checked(n,!r),checked:r},a))})),c.a.createElement(Dt,{className:"buttons"},c.a.createElement(pe,{onClick:this.search},"SEARCH")))}}]),n}(c.a.PureComponent);function Nt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,a=Object(y.a)(e);if(t){var r=Object(y.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(E.a)(this,n)}}function Tt(){var e=Object(a.a)(["\n  order: 1;\n  margin: 0.25rem;\n\n  @media screen and (min-width: 768px) {\n    margin: 0.5rem;\n    padding: 0.5rem;\n    width: 25%;\n  }\n\n  @media screen and (min-width: 1024px) {\n    width: 20%;\n  }\n"]);return Tt=function(){return e},e}var Mt=p.a.aside(Tt()),Ut=function(e){Object(g.a)(n,e);var t=Nt(n);function n(){var e;Object(v.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).checkCategory=Object(Ve.debounce)(function(t){var n=e.props,a=n.categories;(0,n.onUpdateChecked)(t,a)},250),e.search=function(t){var n=e.props,a=n.search.date,r=(a=void 0===a?{}:a).dates;(0,n.onSearch)(Object(We.a)({},t,{dates:r}))},e}return Object(b.a)(n,[{key:"componentDidUpdate",value:function(e){var t=e.categories,n=this.props,a=n.categories,r=n.onFilterCrimeCategory;a.reduce(function(e,n,a){return e?n.checked===t[a].checked:e},!1)||r(a.reduce(function(e,t){return t.checked&&e.push(t.url),e},[]))}},{key:"render",value:function(){var e=this.props,t=e.meta,n=t.message,a=t.loading,r=e.search,o=r.date,i=(o=void 0===o?{}:o).dates,l=r.address,u=e.categories;return c.a.createElement(Mt,null,c.a.createElement(c.a.Fragment,null,c.a.createElement(Lt,{dates:i,categories:u,address:l,onCheckCategory:this.checkCategory,onSearch:this.search}),a&&c.a.createElement(ne,{loading:a}),c.a.createElement(oe,{message:n})))}}]),n}(c.a.PureComponent);Ut.defaultProps={search:{availability:[],category:[]},meta:{message:null,loading:!1},onUpdateChecked:function(){},onFilterCrimeCategory:function(){},onSearch:function(){}};var Ht=Object(d.b)(function(e){return{search:wt(e),meta:kt(e),categories:xt(e)}},function(e){return{onSearch:function(t){return e(function(e){var t=e.minDate,n=e.maxDate,a=e.dates,r=e.postcode,c=a[0].value,o=t||c,i=n||c,l=a.reduce(function(e,t){return o<=t.value&&t.value<=i?[].concat(Object(Qe.a)(e),[t.value]):e},[]).sort(function(e,t){return e.localeCompare(t)});return{type:rt,data:{dates:l,postcode:r}}}(t))},onUpdateChecked:function(t,n){return e(function(e,t){var n=e.url,a=e.checked,r=[];if(n===Je.url)r=t.reduce(function(e,t){return e.push(Object(We.a)({},t,{checked:a})),e},[]);else{var c=(r=t.reduce(function(e,t){return n===t.url?e.push(Object(We.a)({},t,{checked:a})):e.push(t),e},[])).filter(function(e){return e.url!==Je.url}).every(function(e){return e.checked}),o=r.findIndex(function(e){return e.url===Je.url});r[o].checked=c}return{type:it,data:r}}(t,n))},onFilterCrimeCategory:function(t){return e(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{type:bt,data:e}}(t))}}})(Ut),Yt=n(510),$t=n(511),qt=n(505),zt=n(512),Gt=n(507),Kt="containers/AnalysePage/LOAD_GRAPHS_REQUEST",Ft="containers/AnalysePage/LOAD_GRAPHS_SUCCESS",Bt="containers/AnalysePage/LOAD_GRAPHS_FAILURE",Wt="containers/AnalysePage/LOAD_NEWS_REQUEST",Vt="containers/AnalysePage/LOAD_NEWS_SUCCESS",Qt="containers/AnalysePage/LOAD_NEWS_FAILURE",Jt="containers/AnalysePage/LOAD_NEIGHBOURHOOD_REQUEST",Xt="containers/AnalysePage/LOAD_NEIGHBOURHOOD_SUCCESS",Zt="containers/AnalysePage/LOAD_NEIGHBOURHOOD_FAILURE",en="containers/AnalysePage/SAVE_STREET_DATA",tn="containers/AnalysePage/TOGGLE_SHOW";function nn(e,t,n,a){return{type:Xt,data:{init:e,team:t||[],events:n||[],priorities:a||[]}}}function an(e){return{type:en,data:e}}function rn(e){return{type:tn,data:e}}var cn=Object(Ie.a)([function(e){return e.map}],function(e){return e});function on(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,a=Object(y.a)(e);if(t){var r=Object(y.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(E.a)(this,n)}}function ln(){var e=Object(a.a)(["\n  order: 2;\n  height: 100%;\n  z-index: 0;\n\n  @media screen and (min-width: 768px) {\n    width: 80%;\n  }\n\n  .leaflet-container {\n    height: calc(100% - 1rem);\n    margin: 0.5rem;\n    border-radius: 1.5rem;\n  }\n"]);return ln=function(){return e},e}var un=p.a.main(ln()),sn=function(e){Object(g.a)(n,e);var t=on(n);function n(){var e;Object(v.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).map=null,e.handleClick=function(t){(0,e.props.onSaveLocation)(t.latlng)},e.handleLocationFound=function(t){(0,e.props.onSaveLocation)(t.latlng)},e.handleCircle=function(t,n){return function(){var a=e.props,r=a.onLoadGraphRequest,c=a.onLoadNewsRequest,o=a.onLoadNeigbourhoodRequest,i=a.onToggleAnalyseModal;r(t),c(n),o(n),i(!0)}},e}return Object(b.a)(n,[{key:"componentDidMount",value:function(){this.map&&this.map.leafletElement&&this.map.leafletElement.locate()}},{key:"render",value:function(){var e=this,t=this.props,n=t.circles,a=t.latlng,r=void 0===a?{}:a,o=r||{},i=o.lat,l=o.lng;return c.a.createElement(un,{className:"map"},c.a.createElement(Yt.a,{center:r,ref:function(t){e.map=t},zoom:13,onClick:this.handleClick,onLocationfound:this.handleLocationFound},c.a.createElement($t.a,{attribution:"&amp;copy <a href=&quot;http://osm.org/copyright&quot;>OpenStreetMap</a> contributors",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),r&&c.a.createElement(qt.a,{position:[i,l]},c.a.createElement(zt.a,null,"You clicked here!!\n              Latitude: ".concat(i,"\n              Longitude: ").concat(l))),n&&n.map(function(t){var n=t.latlng,a=t.street,r=t.radius,o=t.count,i=t.opacity,l=void 0===i?.5:i,u=t.fillColor;return c.a.createElement(Gt.a,{fillColor:u,fillOpacity:l,stroke:!1,radius:r,center:n,key:n,onClick:e.handleCircle(a,n)},c.a.createElement(zt.a,null,"Street Id: ".concat(a.id,"\n                  Street Name: ").concat(a.name,"\n                  Crime Count: ").concat(o)))})))}}]),n}(c.a.PureComponent),dn=Object(d.b)(function(e){return Object(We.a)({},cn(e))},function(e){return{onSaveLocation:function(t){return e(yt(t))},onLoadGraphRequest:function(t){return e({type:Kt,street:t})},onLoadNewsRequest:function(t){return e(function(e){return{type:Wt,latlng:e}}(t))},onLoadNeigbourhoodRequest:function(t){return e(function(e){return{type:Jt,latlng:e}}(t))},onToggleAnalyseModal:function(t){return e(rn(t))}}})(sn),mn=Object(Ie.a)([function(e){return e.analyse}],function(e){return e}),fn=n(57),hn=n.n(fn);function pn(){var e=Object(a.a)(["\n  & > div {\n    width: 95%;\n    margin: auto;\n\n    @media screen and (min-width: 768px) {\n      display: inline-table;\n      width: 45%;\n      margin: 0.5rem;\n    }\n\n    & > div {\n      line-height: 2rem;\n  \n      & > div {\n        padding: 0 0.5rem;\n        font-size: smaller;\n      }\n    }\n  }\n"]);return pn=function(){return e},e}var vn=p.a.div(pn()),bn=function(e){var t=e.news;return c.a.createElement(vn,null,t&&t.map(function(e){var t=e.id,n=e.sectionName,a=e.pillarName,r=e.webTitle,o=e.webUrl,i=e.webPublicationDate;return c.a.createElement(X,{key:t},c.a.createElement(J,null,c.a.createElement(V,null,"Date"),c.a.createElement(Q,null,hn()(i,"Do MMM YYYY HH:mm"))),c.a.createElement(J,null,c.a.createElement(V,null,"Section"),c.a.createElement(Q,null,n)),c.a.createElement(J,null,c.a.createElement(V,null,"Pillar"),c.a.createElement(Q,null,a)),c.a.createElement(J,null,c.a.createElement(V,null,"Title"),c.a.createElement(Q,null,c.a.createElement("a",{href:o,target:"_new"},r))))}))},gn=n(22);function En(){var e=Object(a.a)(["\n  display: inline-block;\n  padding: 0 0.5rem;\n"]);return En=function(){return e},e}var yn=p.a.div(En()),On=function(e){var t=e.graph,n=(t=void 0===t?{}:t).date,a=t.category,r=t.outcome,o=window.innerWidth;return o>=768&&(o=.75*o/2),o-=35,c.a.createElement("div",null,n&&c.a.createElement(yn,null,c.a.createElement("p",null,"Number of crimes by date"),c.a.createElement(gn.e,{width:o,height:o,data:n},c.a.createElement(gn.g,{dataKey:"date"}),c.a.createElement(gn.h,{type:"number",yAxisId:0}),c.a.createElement(gn.f,null),c.a.createElement(gn.c,{strokeDasharray:"3 3"}),c.a.createElement(gn.d,{type:"basis",dataKey:"count",stroke:"#ff7300",yAxisId:0}))),a&&c.a.createElement(yn,null,c.a.createElement("p",null,"Number of crimes by category"),c.a.createElement(gn.b,{width:o,height:o,data:a},c.a.createElement(gn.g,{dataKey:"category"}),c.a.createElement(gn.h,{type:"number",yAxisId:0}),c.a.createElement(gn.f,null),c.a.createElement(gn.c,{strokeDasharray:"3 3"}),c.a.createElement(gn.a,{legendType:"line",dataKey:"count",fill:"#387908",yAxisId:0}))),r&&c.a.createElement(yn,null,c.a.createElement("p",null,"Number of crimes by outcome"),c.a.createElement(gn.b,{width:o,height:o,data:r},c.a.createElement(gn.g,{dataKey:"outcome"}),c.a.createElement(gn.h,{type:"number",yAxisId:0}),c.a.createElement(gn.f,null),c.a.createElement(gn.c,{strokeDasharray:"3 3"}),c.a.createElement(gn.a,{legendType:"circle",dataKey:"count",fill:"#38abc8",yAxisId:0}))))},jn=n(72),xn=n.n(jn);function wn(){var e=Object(a.a)(["\n  border: 1px solid #a4a4a4;\n  border-radius: 5px;\n  padding: 0.5rem;\n  margin: 0.5rem 0;\n"]);return wn=function(){return e},e}function kn(){var e=Object(a.a)(["\n  font-style: italic;\n  font-weight: lighter;\n  font-size: larger;\n"]);return kn=function(){return e},e}function Cn(){var e=Object(a.a)(["\n  padding: 1rem;\n  font-size: smaller;\n"]);return Cn=function(){return e},e}var Sn=p.a.div(Cn()),Rn=p.a.div(kn()),An=p.a.div(wn()),Dn=function(e){var t=e.data,n=void 0===t?{}:t,a=n.init,r=n.team,o=n.events,i=n.priorities,l=a.contact_details,u=(l=void 0===l?{}:l).email,s=l.facebook,d=l.twitter,m=a.description,f=a.links,h=a.locations,p=a.name,v=a.url_force;return c.a.createElement(Sn,null,c.a.createElement("h3",null,p),c.a.createElement("ul",null,v&&c.a.createElement("li",null,c.a.createElement("a",{href:v,target:"_blank",rel:"noopener noreferrer"},v)),u&&c.a.createElement("li",null,u),s&&c.a.createElement("li",null,s),d&&c.a.createElement("li",null,d)),c.a.createElement("div",null,m&&xn()(m)),c.a.createElement("hr",null),c.a.createElement("h4",null,"You may want to know..."),c.a.createElement("div",null,f&&f.map(function(e,t){var n=e.title,a=e.url;return c.a.createElement("div",{key:n},c.a.createElement("h4",null,n),c.a.createElement("div",null,a),c.a.createElement("div",null,"".concat(h[t].name,", ").concat(h[t].address,", ").concat(h[t].postcode)))})),c.a.createElement("hr",null),c.a.createElement("h4",null,"TEAM"),c.a.createElement("div",null,r&&r.map(function(e){var t=e.name,n=e.bio;return c.a.createElement(An,{key:t},c.a.createElement(Rn,null,t),c.a.createElement("div",null,n&&xn()(n)))})),c.a.createElement("hr",null),c.a.createElement("h4",null,"EVENTS"),c.a.createElement("div",null,o&&o.map(function(e){var t=e.title,n=e.start_date,a=e.end_date,r=e.type,o=e.address,i=e.description;return c.a.createElement(X,{key:"".concat(t,"_").concat(n,"_").concat(a)},c.a.createElement(J,null,c.a.createElement(V,null,"Title"),c.a.createElement(Q,null,t)),c.a.createElement(J,null,c.a.createElement(V,null,"Type"),c.a.createElement(Q,null,r)),c.a.createElement(J,null,c.a.createElement(V,null,"Date"),c.a.createElement(Q,null,"".concat(hn()(n,"Do MMM YYYY HH:mm")," ~ ").concat(hn()(a,"Do MMM YYYY HH:mm")))),c.a.createElement(J,null,c.a.createElement(V,null,"Address"),c.a.createElement(Q,null,o)),c.a.createElement(J,null,c.a.createElement(V,null,"Description"),c.a.createElement(Q,null,i&&xn()(i))))})),c.a.createElement("hr",null),c.a.createElement("h4",null,"PRIORITIES"),c.a.createElement("div",null,i&&i.map(function(e){var t=e.issue,n=e.action,a=Object(ie.a)(e,["issue","action"]);return c.a.createElement(X,{key:"".concat(t,"_").concat(n)},c.a.createElement(J,null,c.a.createElement(V,null,"Issue"),c.a.createElement(Q,null,hn()(a["issue-date"],"Do MMM YYYY HH:mm"))),c.a.createElement(J,null,c.a.createElement(V,null),c.a.createElement(Q,null,t&&xn()(t))),n&&c.a.createElement(J,null,c.a.createElement(V,null,"action"),c.a.createElement(Q,null,hn()(a["action-date"],"Do MMM YYYY HH:mm"))),n&&c.a.createElement(J,null,c.a.createElement(V,null),c.a.createElement(Q,null,n&&xn()(n))))})))};function Pn(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,a=Object(y.a)(e);if(t){var r=Object(y.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(E.a)(this,n)}}var _n=function(e){Object(g.a)(n,e);var t=Pn(n);function n(){var e;return Object(v.a)(this,n),(e=t.call(this)).toggleShow=function(){var t=e.props,n=t.show;(0,t.onToggleShow)(!n)},e.select=function(t){return function(){return e.setState({select:t})}},e.state={select:0},e}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.graph,n=e.news,a=e.street,r=(a=void 0===a?{}:a).name,o=e.neighbourhood,i=e.show,l=this.state.select;return c.a.createElement(Y,{title:r,show:i,onClose:this.toggleShow,fixedBottom:!0},c.a.createElement(Re,{select:l},c.a.createElement(Re.Title,{data:["Graphs","News","Neighbourhood"]}),c.a.createElement(Re.Body,null,c.a.createElement(On,{graph:t}),c.a.createElement(bn,{news:n}),c.a.createElement(Dn,{data:o}))))}}]),n}(c.a.PureComponent),In=Object(d.b)(function(e){return Object(We.a)({},mn(e))},function(e){return{onToggleShow:function(t){return e(rn(t))}}})(_n);function Ln(){var e=Object(a.a)(["\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n\n  @media screen and (min-width: 768px) {\n    flex-direction: row;\n  }\n"]);return Ln=function(){return e},e}var Nn=p.a.div(Ln()),Tn=function(){return c.a.createElement(Nn,null,c.a.createElement(Ht,null),c.a.createElement(dn,null),c.a.createElement(In,null))};function Mn(){var e=Object(a.a)(["\n  text-align: center;\n"]);return Mn=function(){return e},e}var Un=p.a.div(Mn()),Hn=function(e){var t=e.location,n=(t=void 0===t?{}:t).pathname;return c.a.createElement(Un,null,c.a.createElement("h1",null,"NOT FOUND"),c.a.createElement("h3",null,"We do not have this location"),c.a.createElement("h2",null,n),c.a.createElement("h3",null,"which you typed"))},Yn=n(19),$n=n.n(Yn),qn={availability:[],category:[],crimes:[],message:"",loading:!1,address:{}};var zn={latlng:{lat:51.505,lng:-.09},crimes:[],circles:[],message:""};var Gn={graph:{date:[],category:[],outcome:[]},street:{},news:[],neighbourhood:{init:{},team:[],events:[],priorities:[]},show:!1,message:""};var Kn=Object(m.combineReducers)({map:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case pt:return $n()(e,{latlng:{$set:t.data}});case vt:return $n()(e,{crimes:{$set:t.data},circles:{$set:t.data}});case bt:var n=e.crimes.filter(function(e){var n=e.category;return t.data&&t.data.includes(n)});return $n()(e,{circles:{$set:n}});default:return e}},search:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case rt:return $n()(e,{$merge:Object(We.a)({},t.data,{loading:!0})});case Ze:var n=t.data||{},a=n.availability,r=n.date;return $n()(e,{availability:{$set:a},date:{$set:r}});case nt:return $n()(e,{category:{$set:t.data}});case ct:return $n()(e,{crimes:{$set:t.data},loading:{$set:!1}});case et:case at:return $n()(e,{message:{$set:t.message}});case ot:return $n()(e,{message:{$set:t.message},loading:{$set:!1}});case it:return $n()(e,{category:{$set:t.data}});case lt:return $n()(e,{address:{$set:t.data}});default:return e}},analyse:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ft:return $n()(e,{graph:{$set:t.data}});case Vt:return $n()(e,{news:{$set:t.data}});case en:return $n()(e,{street:{$set:t.data}});case Xt:return $n()(e,{neighbourhood:{$set:t.data}});case tn:return $n()(e,{show:{$set:t.data}});case Qt:case Bt:case Zt:return $n()(e,{message:{$set:t.message}});default:return e}}}),Fn=n(16),Bn=n.n(Fn),Wn=n(8),Vn=n(211),Qn=n(212),Jn=n.n(Qn),Xn={police:"https://data.police.uk/api",guardian:"https://content.guardianapis.com/search",mapquest:"https://open.mapquestapi.com/geocoding/v1"},Zn={guardian:"36ecd8a8-f9be-4d95-9643-4095fae41301",mapquest:"7qAl9AvfefdHSIOkkLrVvSc466ZoHenG"};function ea(e){return ta.apply(this,arguments)}function ta(){return(ta=Object(Vn.a)(Bn.a.mark(function e(t){var n,a;return Bn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.status>=200&&t.status<300)){e.next=2;break}return e.abrupt("return",t);case 2:return(n=new Error).response=t,e.prev=4,e.next=7,t.json();case 7:throw a=e.sent,n.body=a,n.message=a.message||t.statusText,n;case 13:throw e.prev=13,e.t0=e.catch(4),e.t0;case 16:case"end":return e.stop()}},e,null,[[4,13]])}))).apply(this,arguments)}function na(e){return 204===e.status||205===e.status?null:e}function aa(e,t){return Jn.a.get(e,t).then(ea).then(na)}var ra=Bn.a.mark(la),ca=Bn.a.mark(ua),oa=Bn.a.mark(sa),ia=Bn.a.mark(da);function la(){var e;return Bn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(Wn.b)(aa,"".concat(Xn.police,"/crimes-street-dates"));case 3:return e=t.sent,t.next=6,Object(Wn.d)(ut(e.data));case 6:t.next=13;break;case 8:return t.prev=8,t.t0=t.catch(0),console.log(t.t0),t.next=13,Object(Wn.d)((n=t.t0.message,{type:et,message:n}));case 13:case"end":return t.stop()}var n},ra,null,[[0,8]])}function ua(){var e,t,n,a,r=arguments;return Bn.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return e=r.length>0&&void 0!==r[0]?r[0]:{},t=e.date,c.prev=1,n=t||(new Date).toLocaleDateString(),c.next=5,Object(Wn.b)(aa,"".concat(Xn.police,"/crime-categories?date=").concat(n));case 5:return a=c.sent,c.next=8,Object(Wn.d)(st(a.data));case 8:c.next=15;break;case 10:return c.prev=10,c.t0=c.catch(1),console.log(c.t0),c.next=15,Object(Wn.d)((o=c.t0.message,{type:at,message:o}));case 15:case"end":return c.stop()}var o},ca,null,[[1,10]])}function sa(){var e,t,n,a,r,c,o,i,l,u,s,d,m,f,h,p,v,b,g,E,y,O,j,x,w,k,C,S=arguments;return Bn.a.wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return e=S.length>0&&void 0!==S[0]?S[0]:{},t=e.data,n=(t=void 0===t?{}:t).dates,a=t.postcode,R.prev=3,R.next=6,Object(Wn.e)(function(e){return e.map.latlng});case 6:if(r=R.sent,c=r.lat,o=r.lng,!a){R.next=20;break}return i={options:{},location:{street:"",city:"",state:"",postalCode:a,adminArea1:"GB"}},R.next=13,Object(Wn.b)(aa,"".concat(Xn.mapquest,"/address?key=").concat(Zn.mapquest,"&json=").concat(JSON.stringify(i)));case 13:l=R.sent,u=l.data,(s=(u=void 0===u?{}:u).results)&&s.length>0&&(d=s[0].locations,m=void 0===d?[]:d,f=Object(Ct.a)(m,1),h=f[0].latLng,p=(h=void 0===h?{}:h).lat,v=h.lng,c=p,o=v),R.next=32;break;case 20:return R.next=22,Object(Wn.b)(aa,"".concat(Xn.mapquest,"/reverse?key=").concat(Zn.mapquest,"&location=").concat(c,",").concat(o));case 22:if(b=R.sent,g=b.data,!((E=(g=void 0===g?{}:g).results)&&E.length>0)){R.next=32;break}return y=E[0].locations,O=void 0===y?[]:y,j=Object(Ct.a)(O,1),x=j[0],w=Object.keys(x).filter(function(e){return e.startsWith("adminArea")&&!e.endsWith("Type")}).reduce(function(e,t){return x[t]&&e.push(x[t]),e},[]).join(","),R.next=32,Object(Wn.d)(ft(x.postalCode,x.street,w));case 32:if(!(c&&o&&n&&n.length>0)){R.next=45;break}return R.next=35,Object(Wn.a)(n.map(function(e){return Object(Wn.b)(aa,"".concat(Xn.police,"/crimes-street/all-crime?lat=").concat(c,"&lng=").concat(o,"&date=").concat(e))}));case 35:return k=R.sent,C=k&&k.reduce(function(e,t){return[].concat(Object(Qe.a)(e),Object(Qe.a)(t&&t.data))},[]),R.next=39,Object(Wn.d)(yt({lat:c,lng:o}));case 39:return R.next=41,Object(Wn.d)(dt(C));case 41:return R.next=43,Object(Wn.d)(Ot(C));case 43:R.next=47;break;case 45:return R.next=47,Object(Wn.d)(mt("There is no position info! Please, click the map and tell me where you want to know"));case 47:R.next=54;break;case 49:return R.prev=49,R.t0=R.catch(3),console.log(R.t0),R.next=54,Object(Wn.d)(mt(R.t0.message));case 54:case"end":return R.stop()}},oa,null,[[3,49]])}function da(){return Bn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Wn.c)(la);case 2:return e.next=4,Object(Wn.c)(ua);case 4:return e.next=6,Object(Wn.f)(tt,ua);case 6:return e.next=8,Object(Wn.f)(rt,sa);case 8:case"end":return e.stop()}},ia)}var ma=Bn.a.mark(va),fa=Bn.a.mark(ba),ha=Bn.a.mark(ga),pa=Bn.a.mark(Ea);function va(e){var t,n,a,r,c,o,i,l;return Bn.a.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return t=e.street,u.prev=1,u.next=4,Object(Wn.e)(function(e){return e.search.crimes});case 4:return n=u.sent,a=n&&n.filter(function(e){var n=e.location,a=(n=void 0===n?{}:n).street;return(a=void 0===a?{}:a).id===t.id}),u.next=8,Object(Wn.e)(function(e){return e.search.dates});case 8:return r=u.sent,c=a.reduce(function(e,t){var n=t.month,a=t.category,r=t.outcome_status,c=t.outcomes,o=(c=void 0===c?r||{}:c).category;return{date:Object(We.a)({},e.date,Object(ht.a)({},n,e.date[n]?e.date[n]+1:1)),category:Object(We.a)({},e.category,Object(ht.a)({},a,e.category[a]?e.category[a]+1:1)),outcome:Object(We.a)({},e.outcome,Object(ht.a)({},o,e.outcome[o]?e.outcome[o]+1:1))}},{date:{},category:{},outcome:{}}),o=c.date,i=c.category,l=c.outcome,u.next=12,Object(Wn.d)((d={date:r.map(function(e){return{date:e,count:o[e]||0}}),category:Object.entries(i).map(function(e){var t=Object(Ct.a)(e,2);return{category:t[0],count:t[1]}}),outcome:Object.entries(l).map(function(e){var t=Object(Ct.a)(e,2);return{outcome:t[0],count:t[1]}})},{type:Ft,data:d}));case 12:return u.next=14,Object(Wn.d)(an(t));case 14:u.next=21;break;case 16:return u.prev=16,u.t0=u.catch(1),console.error(u.t0),u.next=21,Object(Wn.d)((s=u.t0.message,{type:Bt,message:s}));case 21:case"end":return u.stop()}var s,d},ma,null,[[1,16]])}function ba(e){var t,n,a,r,c,o,i,l,u,s,d,m,f,h,p,v,b;return Bn.a.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return t=e.latlng,g.prev=1,n="".concat(Xn.mapquest,"/reverse?key=").concat(Zn.mapquest,"&location=").concat(t.join(","),"&includeRoadMetadata=true&includeNearestIntersection=true"),g.next=5,Object(Wn.b)(aa,n);case 5:return a=g.sent,r=a.data,c=(r=void 0===r?{}:r).results,o=(void 0===c?[]:c)[0].locations,i=(void 0===o?[]:o)[0],l=i.street,u=i.adminArea5,s=i.postalCode,d="".concat(u," AND ").concat(l||s),g.next=14,Object(Wn.e)(function(e){return e.search.dates});case 14:return m=g.sent,f="".concat(Xn.guardian,"?q=").concat(d,"&from-date=").concat(m[0],"-01&api-key=").concat(Zn.guardian),g.next=18,Object(Wn.b)(aa,f);case 18:return h=g.sent,p=h.data,v=(p=void 0===p?{}:p).response.results,(b=void 0===v?[]:v).sort(function(e,t){return t.webPublicationDate.localeCompare(e.webPublicationDate)}),g.next=25,Object(Wn.d)({type:Vt,data:b});case 25:g.next=32;break;case 27:return g.prev=27,g.t0=g.catch(1),console.error(g.t0),g.next=32,Object(Wn.d)((E=g.t0.message,{type:Qt,message:E}));case 32:case"end":return g.stop()}var E},fa,null,[[1,27]])}function ga(e){var t,n,a,r,c,o,i,l,u,s,d,m,f;return Bn.a.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return t=e.latlng,h.prev=1,n="".concat(Xn.police,"/locate-neighbourhood?q=").concat(t.join(",")),h.next=5,Object(Wn.b)(aa,n);case 5:return a=h.sent,r=a.data,c=r.force,o=r.neighbourhood,i="".concat(Xn.police,"/").concat(c,"/").concat(o),h.next=12,Object(Wn.a)([Object(Wn.b)(aa,i),Object(Wn.b)(aa,"".concat(i,"/people")),Object(Wn.b)(aa,"".concat(i,"/events")),Object(Wn.b)(aa,"".concat(i,"/priorities"))]);case 12:return l=h.sent,u=Object(Ct.a)(l,4),s=u[0].data,d=u[1].data,m=u[2].data,f=u[3].data,h.next=20,Object(Wn.d)(nn(s,d,m,f));case 20:h.next=27;break;case 22:return h.prev=22,h.t0=h.catch(1),console.error(h.t0),h.next=27,Object(Wn.d)((p=h.t0.message,{type:Zt,message:p}));case 27:case"end":return h.stop()}var p},ha,null,[[1,22]])}function Ea(){return Bn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Wn.f)(Kt,va);case 2:return e.next=4,Object(Wn.f)(Wt,ba);case 4:return e.next=6,Object(Wn.f)(Jt,ga);case 6:case"end":return e.stop()}},pa)}var ya=Bn.a.mark(Oa);function Oa(){return Bn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Wn.a)([da,Ea].map(Wn.c));case 2:case"end":return e.stop()}},ya)}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ja(){var e=Object(a.a)(["\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n"]);return ja=function(){return e},e}var xa=Object(f.a)(),wa=Object(m.createStore)(Kn,Object(h.composeWithDevTools)(Object(m.applyMiddleware)(xa)));xa.run(Oa);var ka=p.a.div(ja());i.a.render(c.a.createElement(d.a,{store:wa},c.a.createElement(ka,null,c.a.createElement(Be,null),c.a.createElement(l.a,{basename:"/crimemap"},c.a.createElement(u.a,null,c.a.createElement(s.a,{exact:!0,path:"/",component:Tn}),c.a.createElement(s.a,{component:Hn}))))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[244,2,1]]]);
//# sourceMappingURL=main.75e0d912.chunk.js.map